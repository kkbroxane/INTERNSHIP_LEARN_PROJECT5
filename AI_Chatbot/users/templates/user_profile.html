{% extends 'base.html' %}

{% block content %}

<style>
.profile-card {
    max-width: 400px;
    margin: auto;
    text-align: center;
}
.profile-pic {
    width: 250px;
    height: 250px;
    object-fit: cover;
    border-radius: 50%;
}
</style>

<div class="container">
    <!-- Back to home button -->
    <a href="{% url 'home' %}" class="btn btn-outline-primary mt-3">‚Üê Back to Home</a>

    <div class="profile-card text-center mt-5 p-4 shadow rounded">
        <!-- Profile picture -->
        <img src="{{ user.profile_pic.url }}" alt="Profile Picture" class="profile-pic mb-3">

        <!-- Name and Email -->
        <h3>{{ user.first_name }} {{ user.last_name }}</h3>
        <p class="text-muted">{{ user.email }}</p>

        <!-- Form to update profile picture -->
        <form method="POST" enctype="multipart/form-data" action="{% url 'update_profile' %}" id="profile-form">
            {% csrf_token %}
            <!-- Hidden file input -->
            <input type="file" name="profile_pic" id="profile_pic_input" class="d-none">

            <!-- Button triggers file input -->
            <button type="button" class="btn btn-primary mt-3" onclick="document.getElementById('profile_pic_input').click();">
                New profile picture
            </button>

            <!-- Optional: automatically submit form after file selection -->
            <script>
                const fileInput = document.getElementById('profile_pic_input');
                fileInput.addEventListener('change', function() {
                    if(this.files.length > 0) {
                        document.getElementById('profile-form').submit();
                    }
                });
            </script>
        </form>
    </div>
</div>

{% endblock %}
